/**
 * <%= model.label%> controller.
 *
 * Auto-generated by modelGenerator.
 *
 * @author  Nicolas Iglesias <nico@webpolis.com.ar> for daturajs - https://github.com/webpolis/daturajs -
 * @class   <%= model.camelName%>Controller
 * @date    <%= Date()%>
 */
 
module.exports = function(){
    var <%= model.camelName%>Controller = {
        index : function (){
            // @todo apply role based permission
            if(this.auth===null){
                this.redirect('/')
                return
            }
            
            var <%= model.camelName%> = this.models.<%= model.camelName%>.getInstance()
            
            this.app.set('title','<%= model.label%>');
            this.app.set('code','<%= model.camelName%>.index');
            
            this.render('list',{
                <%= model.camelName%> : <%= model.camelName%>,
                <%= model.camelName%>Columns : this.grid.typeMap(<%= model.camelName%>.$getFields(<%= model.camelName%>.getListableColumns()))
            });
        }
    };
    return <%= model.camelName%>Controller;
}